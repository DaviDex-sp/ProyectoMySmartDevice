@page
@model ProyectoMSD.Pages.Soportes.CreateModel

@{
    ViewData["Title"] = "Create";
}

@section Styles {
    <link href="~/css/pages/soportes.css" rel="stylesheet" />
}

<div class="container" style="padding: 2rem 0;">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card" style="border-radius: 25px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); border: 1px solid rgba(255,255,255,0.3); overflow: hidden;">
                <div class="card-header" style="background: linear-gradient(135deg, #258cfb, #1e7ce8); color: white; padding: 2rem; border-bottom: none; position: relative; overflow: hidden;">
                    <h3 class="mb-2 fw-bold">
                        <i class="fas fa-ticket-alt me-3"></i>Crear Nuevo Ticket de Soporte
                    </h3>
                    <p class="mb-0 opacity-90">Describe tu problema o consulta para recibir ayuda</p>
                </div>

                <div class="card-body" style="padding: 2.5rem;">
                    <form method="post">
                        <!-- MOSTRAR TODOS los errores -->
                        <div asp-validation-summary="All" class="alert alert-danger"></div>

                        <!-- Fecha (automática, solo lectura) -->
                        <div class="mb-3">
                            <label asp-for="Soporte.Fecha" class="form-label">
                                <i class="fas fa-calendar-alt me-2 text-primary"></i>Fecha del Ticket
                            </label>
                            <input asp-for="Soporte.Fecha" type="date" class="form-control" readonly
                                   value="@DateTime.Now.ToString("yyyy-MM-dd")">
                            <span asp-validation-for="Soporte.Fecha" class="text-danger"></span>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>La fecha se asigna automáticamente
                            </div>
                        </div>

                        <!-- Tipo de Consulta -->
                        <div class="mb-3">
                            <label asp-for="Soporte.Tipo" class="form-label">
                                <i class="fas fa-tags me-2 text-primary"></i>Tipo de Consulta
                            </label>
                            <select asp-for="Soporte.Tipo" class="form-select">
                                <option value="">Seleccionar tipo de consulta...</option>
                                <option value="consulta">❓ Consulta General</option>
                                <option value="problema">⚠️ Problema Técnico</option>
                                <option value="sugerencia">💡 Sugerencia</option>
                                <option value="instalacion">🔧 Ayuda con Instalación</option>
                                <option value="configuracion">⚙️ Configuración</option>
                                <option value="facturacion">💳 Facturación</option>
                            </select>
                            <span asp-validation-for="Soporte.Tipo" class="text-danger"></span>
                        </div>

                        <!-- Descripción del Problema -->
                        <div class="mb-4">
                            <label asp-for="Soporte.Descripcion" class="form-label">
                                <i class="fas fa-file-alt me-2 text-primary"></i>Descripción del Problema
                            </label>
                            <textarea asp-for="Soporte.Descripcion" class="form-control" rows="5"
                                      placeholder="Describe detalladamente tu problema o consulta. Incluye pasos que seguiste, mensajes de error, o cualquier información relevante..."></textarea>
                            <span asp-validation-for="Soporte.Descripcion" class="text-danger"></span>
                            <div class="form-text">
                                <i class="fas fa-lightbulb me-1"></i>Entre más detalles proporciones, mejor podremos ayudarte
                            </div>
                        </div>

                        <!-- Usuario (dropdown mejorado) -->
                        <div class="mb-4">
                            <label asp-for="Soporte.IdUsuarios" class="form-label">
                                <i class="fas fa-user me-2 text-primary"></i>Usuario que Reporta
                            </label>
                            <select asp-for="Soporte.IdUsuarios" class="form-select" asp-items="ViewBag.NombreUsuarios">
                                <option value="">-- Seleccione el usuario --</option>
                            </select>
                            <span asp-validation-for="Soporte.IdUsuarios" class="text-danger"></span>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>Selecciona el usuario que está reportando este problema
                            </div>
                        </div>

                        <!-- Método de Respuesta -->
                        <div class="mb-4">
                            <label asp-for="Soporte.Respuesta" class="form-label">
                                <i class="fas fa-reply me-2 text-primary"></i>¿Cómo prefieres que llegue tu respuesta?
                            </label>
                            <select asp-for="Soporte.Respuesta" class="form-select">
                                <option value="">-- Seleccione un método de respuesta --</option>
                                <option value="Correo"> Correo</option>
                                <option value="Sitio"> Sitio</option>
                                <option value="Teléfono"> Teléfono</option>
                            </select>
                            <span asp-validation-for="Soporte.Respuesta" class="text-danger"></span>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>Elige el medio por el cual deseas recibir la respuesta
                            </div>
                        </div>

                        <!-- Botones de Acción -->
                        <div class="d-flex justify-content-between">
                            <a asp-page="Index" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>Volver al Soporte
                            </a>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-paper-plane me-2"></i>Crear Ticket
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}