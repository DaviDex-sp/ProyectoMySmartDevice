@page
@model ProyectoMSD.Pages.Soportes.DeleteModel

@{
    ViewData["Title"] = "Eliminar Soporte";
}

@section Styles {
    <link href="~/css/pages/soportes.css" rel="stylesheet" />
}

<div class="main-container" style="max-width: 1000px;">
    <!-- Danger Header -->
    <div class="profile-header" style="background: linear-gradient(135deg, #dc3545, #b02a37);">
        <div class="d-flex align-items-center">
            <div class="position-relative me-4">
                <div style="width:100px; height:100px; background:rgba(255,255,255,0.2); border:4px solid rgba(255,255,255,0.3); border-radius:20px; display:flex; align-items:center; justify-content:center; font-size:2.5rem; color:white;">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="delete-badge">ELIMINAR</div>
            </div>
            <div class="flex-grow-1">
                <h2 class="mb-2 text-white">¿Eliminar Ticket de Soporte?</h2>
                <div class="profile-status">
                    <strong>¡ATENCIÓN!</strong> Esta acción eliminará permanentemente el historial del ticket
                </div>
            </div>
        </div>
    </div>

    <!-- Warning Section -->
    <div class="form-container" style="border: 1px solid rgba(220,53,69,0.2);">
        <div class="form-header" style="border-bottom-color: rgba(220,53,69,0.2);">
            <h3 style="color: #dc3545;">
                <i class="fas fa-exclamation-circle"></i>
                Confirmación de Eliminación
            </h3>
        </div>

        <div class="alert alert-danger" style="border-left: 4px solid #dc3545;">
            <strong>¿Estás seguro de que quieres eliminar este ticket de soporte?</strong><br>
            Esta acción eliminará permanentemente toda la información del ticket, incluyendo la descripción, respuestas y historial de actividad.
        </div>

        <!-- Support Details -->
        <div style="background: #f8f9fa; border-radius: 15px; padding: 1.5rem; margin-bottom: 2rem;">
            <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-hashtag me-2 text-danger"></i>ID del Ticket</div>
                <div class="text-muted bg-white px-3 py-1 rounded border">#@Html.DisplayFor(model => model.Soporte.Id)</div>
            </div>
            <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-calendar-alt me-2 text-danger"></i>Fecha</div>
                <div class="text-muted bg-white px-3 py-1 rounded border">@Html.DisplayFor(model => model.Soporte.Fecha)</div>
            </div>
            <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-list-alt me-2 text-danger"></i>Tipo de Soporte</div>
                <div class="text-muted bg-white px-3 py-1 rounded border">@Html.DisplayFor(model => model.Soporte.Tipo)</div>
            </div>
            <div class="d-flex justify-content-between align-items-start py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-file-alt me-2 text-danger"></i>Descripción</div>
                <div class="text-muted bg-white px-3 py-1 rounded border" style="max-height:100px; overflow-y:auto; flex:1; margin-left:1rem;">
                    @Html.DisplayFor(model => model.Soporte.Descripcion)
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-start py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-reply me-2 text-danger"></i>Respuesta</div>
                <div class="text-muted bg-white px-3 py-1 rounded border" style="max-height:100px; overflow-y:auto; flex:1; margin-left:1rem;">
                    @if (!String.IsNullOrEmpty(Model.Soporte.Respuesta))
                    {
                        @Html.DisplayFor(model => model.Soporte.Respuesta)
                    }
                    else
                    {
                        <span class="text-muted"><em>Sin respuesta</em></span>
                    }
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                <div class="fw-bold"><i class="fas fa-user me-2 text-danger"></i>Usuario Asignado</div>
                <div class="text-muted bg-white px-3 py-1 rounded border">@(Model.Soporte.IdUsuariosNavigation?.Nombre ?? "No asignado")</div>
            </div>
            <div class="d-flex justify-content-between align-items-center py-2">
                <div class="fw-bold"><i class="fas fa-info-circle me-2 text-danger"></i>Estado</div>
                <div>
                    @if (!String.IsNullOrEmpty(Model.Soporte.Respuesta))
                    {
                        <span class="badge bg-success">Respondido</span>
                    }
                    else
                    {
                        <span class="badge bg-warning text-dark">Pendiente</span>
                    }
                </div>
            </div>
        </div>

        <form method="post">
            <input type="hidden" asp-for="Soporte.Id" />
            <div class="d-flex justify-content-between align-items-center mt-4">
                <a asp-page="./Index" class="btn-secondary-custom">
                    <i class="fas fa-arrow-left me-2"></i>Cancelar
                </a>
                <button type="submit" class="btn-danger-custom" onclick="return confirm('¿Estás completamente seguro? Esta acción eliminará todo el historial del ticket y no se puede deshacer.')">
                    <i class="fas fa-trash me-2"></i>Confirmar Eliminación
                </button>
            </div>
        </form>
    </div>
</div>
